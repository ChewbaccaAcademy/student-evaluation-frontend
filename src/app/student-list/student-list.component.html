<div class="container text-shrink">
  <div class="row">
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"></div>
    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon1">Search</span>
        </div>
        <input type="text" class="form-control" placeholder="Student name and/or surname"
          aria-describedby="basic-addon1" #search (keyup)="filterStudents(search.value)" />
      </div>
    </div>

    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"></div>
  </div>

  <div class="row justify-content-center">
    <div class="col-auto">
      <table class="table table-striped table-responsive">
        <thead class="thead-dark">
          <tr>
            <th rowspan="2">Picture
            </th>
            <th rowspan="2">Student
            </th>
            <th colspan="4">
              <div style="border: 10px; border-color: black;">
                <p class="text-center value">Average</p>
              </div>
            </th>
            <th rowspan="2">Evaluate
            </th>
          </tr>
          <tr>
            <th scope="col" [appSort]="studentsList" data-order="-1"
              data-name="averageEvaluationDetails.streamOverall.fe">
              <a>
                <p class="text-center value">Frontend</p>
              </a>
            </th>
            <th scope="col" [appSort]="studentsList" data-order="-1"
              data-name="averageEvaluationDetails.streamOverall.be">
              <a>
                <p class="text-center value">Backend</p>
              </a>
            </th>
            <th scope="col" [appSort]="studentsList" data-order="-1"
              data-name="averageEvaluationDetails.streamOverall.qa">
              <a>
                <p class="text-center value">Testing</p>
              </a>
            </th>
            <th scope="col" [appSort]="studentsList" data-order="-1"
              data-name="averageEvaluationDetails.streamOverall.project">
              <a>
                <p class="text-center value">Project</p>
              </a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of studentsList; let j = index">
            <th>
              <img class="test" [src]="getStudentImage(student)" [alt]="getImageTitle(student)"
                [routerLink]="['/student', student.id]" />
            </th>
            <td class="align-middle" style="word-break:normal;">
              <a class="student-name text-center truncate" [routerLink]="['/student', student.id]">
                {{ student.name }} {{ student.lastname }}
              </a>
            </td>
            <td class="align-middle">
              <p class="text-center value">
                {{student.averageEvaluationDetails.streamOverall.fe ? student.averageEvaluationDetails.streamOverall.fe
                : '-'}}</p>
            </td>
            <td class="align-middle">
              <p class="text-center value">
                {{student.averageEvaluationDetails.streamOverall.be ? student.averageEvaluationDetails.streamOverall.be
                : '-'}}</p>
            </td>
            <td class="align-middle">
              <p class="text-center value">
                {{student.averageEvaluationDetails.streamOverall.be ? student.averageEvaluationDetails.streamOverall.qa
                : '-'}}</p>
            </td>
            <td class="align-middle">
              <p class="text-center value">
                {{student.averageEvaluationDetails.streamOverall.be ?
                student.averageEvaluationDetails.streamOverall.project : '-'}}</p>
            </td>
            <td class="align-middle text-center">
              <button type="button" class="btn btn-primary user-choice" [routerLink]="['/edit', student.id]"
                *ngIf="isAdmin()">Edit</button>
              <br>
              <button type="button" class="btn btn-primary user-choice"
                (click)="evaluateStudent(student.id)">Evaluate</button>
              <br>
              <button type="button" class="btn btn-danger user-choice" data-toggle="modal"
                [attr.data-target]="'#deleteConfirmationModal'+j" *ngIf="isAdmin()">Delete</button>
              <div class="modal fade" [attr.id]="'deleteConfirmationModal'+j" tabindex="-1" role="dialog"
                [attr.aria-labelledby]="'deleteConfirmationModal'+j" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" [attr.id]="'deleteConfirmationModalLabel'+j">Confirmation</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this student?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-danger" (click)="deleteStudent(student.id, j)"
                        data-dismiss="modal">Yes, delete</button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>