<div class="container text-shrink">
  <div class="row">
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"></div>
    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon1">Search</span>
        </div>
        <input type="text" class="form-control" placeholder="Student name and/or surname"
          aria-describedby="basic-addon1" #search (keyup)="filterStudents(search.value)" />
      </div>
    </div>

    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"></div>
  </div>

  <div class="row justify-content-center">
    <div class="col-auto">
      <table class="table table-striped table-responsive">
        <thead class="thead-dark" >
          <tr>
            <th rowspan="2">Picture
            </th>
            <th rowspan="2">Student
            </th>
            <th colspan="4">
              <div style="border: 10px; border-color: black;">
              <p class="text-center value">Average</p>
            </div>
            </th>
            <th rowspan="2">Evaluate
            </th>
          </tr>
          <tr>
            <th scope="col">
              <p class="text-center value">BE</p>
            </th>
            <th scope="col">
              <p class="text-center value">FE</p>
            </th>
            <th scope="col">
              <p class="text-center value">Testing</p>
            </th>
            <th scope="col">
              <p class="text-center value">Project</p>
            </th>
          </tr>
        </thead>
        <tbody *ngFor="let student of students">
          <tr>
            <th>
              <img class="test" [src]="getStudentImage(student)" [alt]="getImageTitle(student)" [routerLink]="['/student', student.id]" />
            </th>
            <td class="align-middle" style="word-break:normal;">
              <a class="student-name text-center truncate" [routerLink]="['/student', student.id]">
                {{ student.name }} {{ student.lastname }}
              </a>
            </td>
            <td class="align-middle">
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.fe != 0">
                {{student.averageEvaluationDetails.streamOverall.fe}}</p>
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.fe == 0">-</p>
            </td>
            <td class="align-middle">
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.be != 0">
                {{student.averageEvaluationDetails.streamOverall.be}}</p>
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.be == 0">-</p>
            </td>
            <td class="align-middle">
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.qa != 0">
                {{student.averageEvaluationDetails.streamOverall.qa}}</p>
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.qa == 0">-</p>
            </td>
            <td class="align-middle">
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.project != 0">
                {{student.averageEvaluationDetails.streamOverall.project}}</p>
              <p class="text-center value" *ngIf="student.averageEvaluationDetails.streamOverall.project == 0">-</p>
            </td>
            <td class="align-middle text-center">
              <img src="assets/images.png" alt="evaluate.jpg" height="50" class="rounded-circle evaluate"
                [routerLink]="['/evaluate', student.id]" />

              <img  *ngIf="getRole() == 'ADMIN'"  src="assets/editIcon.png" height="50" class="rounded-circle evaluate"
                [routerLink]="['/edit', student.id]" />
              <button type="button" class="btn btn-primary user-choice"
                (click)="evaluateStudent(student.id)">Evaluate</button>
              <br>
              <button type="button" class="btn btn-danger user-choice" data-toggle="modal" data-target="#myModal"
                *ngIf="isAdmin()">Delete</button>
              <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title">Confirmation</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>

                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this student?</p>
                    </div>
                    <div class="modal-footer">
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" (click)="deleteStudent()"
                          data-dismiss="modal">Yes,
                          delete</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>